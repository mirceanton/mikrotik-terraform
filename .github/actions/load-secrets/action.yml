---
name: Load Secrets from 1Password
description: Load secrets from 1Password and export them as environment variables

inputs:
  op-service-account-token:
    description: 1Password Service Account Token
    required: true

runs:
  using: composite
  steps:
    - name: Load secrets from 1Password
      uses: 1password/load-secrets-action@13f58eec611f8e5db52ec16247f58c508398f3e6 # v3.0.0
      with: { export-env: true }
      env:
        OP_SERVICE_ACCOUNT_TOKEN: ${{ inputs.op-service-account-token }}

        AWS_ACCESS_KEY_ID: op://Automation/Mikrotik Terraform Backblaze B2 State/username
        AWS_SECRET_ACCESS_KEY: op://Automation/Mikrotik Terraform Backblaze B2 State/password

        MIKROTIK_USERNAME: op://Automation/Mikrotik/username
        MIKROTIK_PASSWORD: op://Automation/Mikrotik/password

        PPPOE_USERNAME: op://Badoink/Digi PPPoE/username
        PPPOE_PASSWORD: op://Badoink/Digi PPPoE/password

        ZEROTIER_CENTRAL_TOKEN: op://Automation/ZeroTier Central Token/password
        CLOUDFLARE_API_TOKEN: op://Automation/CloudFlare Token Mikrotik-Terraform/password
